apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ template "fullname" . }}
data:
  groups.ldif: |-
    # LDIF Export for dc={{ template "fullname" . }}
    # Server: ldap (ldap)
    # Search Scope: sub
    # Search Filter: (objectClass=*)
    # Total Entries: 18
    #
    # Generated by phpLDAPadmin (http://phpldapadmin.sourceforge.net) on April 25, 2016 4:05 pm
    # Version: 1.2.3

    version: 1

    Entry 1: dc={{ template "fullname" . }}
    dn: dc={{ template "fullname" . }}
    dc: {{ template "fullname" . }}
    o: Helios Technologies
    objectclass: top
    objectclass: dcObject
    objectclass: organization

    # Entry 2: cn=admin,dc={{ template "fullname" . }}
    dn: cn=admin,dc={{ template "fullname" . }}
    cn: admin
    description: LDAP administrator
    objectclass: simpleSecurityObject
    objectclass: organizationalRole
    userpassword: {{ .Values.global.LdapAdminPassword }}

    # Entry 3: ou=groups,dc={{ template "fullname" . }}
    dn: ou=groups,dc={{ template "fullname" . }}
    objectclass: organizationalUnit
    objectclass: top
    ou: groups

    # Entry 4: ou=gerrit,ou=groups,dc={{ template "fullname" . }}
    dn: ou=gerrit,ou=groups,dc={{ template "fullname" . }}
    objectclass: organizationalUnit
    objectclass: top
    ou: gerrit

    # Entry 5: cn=administrators,ou=gerrit,ou=groups,dc={{ template "fullname" . }}
    dn: cn=administrators,ou=gerrit,ou=groups,dc={{ template "fullname" . }}
    cn: administrators
    gidnumber: 500
    objectclass: posixGroup
    objectclass: top

    # Entry 6: cn=developers,ou=gerrit,ou=groups,dc={{ template "fullname" . }}
    dn: cn=developers,ou=gerrit,ou=groups,dc={{ template "fullname" . }}
    cn: developers
    gidnumber: 502
    objectclass: posixGroup
    objectclass: top

    # Entry 7: cn=managers,ou=gerrit,ou=groups,dc={{ template "fullname" . }}
    dn: cn=managers,ou=gerrit,ou=groups,dc={{ template "fullname" . }}
    cn: managers
    gidnumber: 501
    objectclass: posixGroup
    objectclass: top

    # Entry 8: cn=testers,ou=gerrit,ou=groups,dc={{ template "fullname" . }}
    dn: cn=testers,ou=gerrit,ou=groups,dc={{ template "fullname" . }}
    cn: testers
    gidnumber: 503
    objectclass: posixGroup
    objectclass: top

    # Entry 9: ou=build,ou=groups,dc={{ template "fullname" . }}
    dn: ou=build,ou=groups,dc={{ template "fullname" . }}
    objectclass: organizationalUnit
    objectclass: top
    ou: build

    # Entry 10: cn=administrators,ou=build,ou=groups,dc={{ template "fullname" . }}
    dn: cn=administrators,ou=build,ou=groups,dc={{ template "fullname" . }}
    cn: administrators
    gidnumber: 504
    memberuid: sysops
    objectclass: posixGroup
    objectclass: top

    # Entry 11: cn=developers,ou=build,ou=groups,dc={{ template "fullname" . }}
    dn: cn=developers,ou=build,ou=groups,dc={{ template "fullname" . }}
    cn: developers
    gidnumber: 505
    objectclass: posixGroup
    objectclass: top

    # Entry 12: ou=unix,ou=groups,dc={{ template "fullname" . }}
    dn: ou=unix,ou=groups,dc={{ template "fullname" . }}
    objectclass: organizationalUnit
    objectclass: top
    ou: unix

    # Entry 13: cn=sysops,ou=unix,ou=groups,dc={{ template "fullname" . }}
    dn: cn=sysops,ou=unix,ou=groups,dc={{ template "fullname" . }}
    cn: sysops
    gidnumber: 1500
    objectclass: posixGroup
    objectclass: top

    # Entry 14: ou=wiki,ou=groups,dc={{ template "fullname" . }}
    dn: ou=wiki,ou=groups,dc={{ template "fullname" . }}
    objectclass: organizationalUnit
    objectclass: top
    ou: wiki

    # Entry 15: cn=administrators,ou=wiki,ou=groups,dc={{ template "fullname" . }}
    dn: cn=administrators,ou=wiki,ou=groups,dc={{ template "fullname" . }}
    cn: administrators
    gidnumber: 506
    objectclass: posixGroup
    objectclass: top

    # Entry 16: cn=developers,ou=wiki,ou=groups,dc={{ template "fullname" . }}
    dn: cn=developers,ou=wiki,ou=groups,dc={{ template "fullname" . }}
    cn: developers
    gidnumber: 507
    objectclass: posixGroup
    objectclass: top

    # Entry 17: ou=people,dc={{ template "fullname" . }}
    dn: ou=people,dc={{ template "fullname" . }}
    objectclass: organizationalUnit
    objectclass: top
    ou: people

    # Entry 18: cn=sysops,ou=people,dc={{ template "fullname" . }}
    dn: cn=sysops,ou=people,dc={{ template "fullname" . }}
    cn: sysops
    gidnumber: 1500
    givenname: Sysops
    homedirectory: /home/users/sysops
    loginshell: /bin/sh
    mail: sysops@{{ .Values.global.domain }}
    objectclass: inetOrgPerson
    objectclass: posixAccount
    objectclass: top
    sn: {{ $domain := .Values.global.domain | split "." }}{{ $domain._0 | title }}
    uid: sysops
    uidnumber: 1000
    userpassword: {{ .Values.global.SysopsPassword }}
